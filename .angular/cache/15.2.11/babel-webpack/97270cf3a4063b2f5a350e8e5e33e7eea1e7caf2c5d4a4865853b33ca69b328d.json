{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/cart.service\";\nimport * as i2 from \"@angular/common\";\nfunction CartComponent_div_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"img\", 6);\n    i0.ɵɵelementStart(2, \"div\", 7)(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 8);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 9)(9, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_0_div_1_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.decreaseQty(item_r4));\n    });\n    i0.ɵɵtext(10, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_0_div_1_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r4 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.increaseQty(item_r4));\n    });\n    i0.ɵɵtext(14, \"+\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_0_div_1_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r4 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.removeItem(item_r4));\n    });\n    i0.ɵɵtext(16, \"X\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", item_r4.thumbnail, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r4.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 4, item_r4.price));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(item_r4.qty);\n  }\n}\nfunction CartComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, CartComponent_div_0_div_1_Template, 17, 6, \"div\", 3);\n    i0.ɵɵelementStart(2, \"h2\", 4);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.cartItems);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Total: \", i0.ɵɵpipeBind1(4, 2, ctx_r0.totalPrice), \"\");\n  }\n}\nfunction CartComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\", 12);\n    i0.ɵɵtext(1, \"Cart is empty\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class CartComponent {\n  constructor(cart) {\n    this.cart = cart;\n    this.cartItems = [];\n    this.totalPrice = 0;\n  }\n  ngOnInit() {\n    // მოსმენასაც იწყებს live updates-სთვის\n    this.cart.cartItems$.subscribe(items => {\n      this.cartItems = items.map(item => ({\n        ...item,\n        qty: item.quantity || 1\n      }));\n      this.calculateTotal();\n    });\n  }\n  increaseQty(item) {\n    item.qty++;\n    this.updateItem(item);\n  }\n  decreaseQty(item) {\n    if (item.qty > 1) {\n      item.qty--;\n      this.updateItem(item);\n    }\n  }\n  updateItem(item) {\n    this.cart.updateQuantity(item.id, item.qty);\n    this.calculateTotal();\n  }\n  removeItem(item) {\n    this.cart.removeItem(item);\n  }\n  calculateTotal() {\n    this.totalPrice = this.cartItems.reduce((sum, item) => sum + item.price * item.qty, 0);\n  }\n}\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.CartService));\n};\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  decls: 3,\n  vars: 2,\n  consts: [[\"class\", \"cart-container\", 4, \"ngIf\", \"ngIfElse\"], [\"emptyCart\", \"\"], [1, \"cart-container\"], [\"class\", \"cart-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"total\"], [1, \"cart-card\"], [1, \"cart-img\", 3, \"src\"], [1, \"cart-info\"], [1, \"price\"], [1, \"qty-box\"], [3, \"click\"], [1, \"delete-btn\", 3, \"click\"], [1, \"empty\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CartComponent_div_0_Template, 5, 4, \"div\", 0);\n      i0.ɵɵtemplate(1, CartComponent_ng_template_1_Template, 2, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.cartItems.length > 0)(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i2.CurrencyPipe],\n  styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\tvar __webpack_modules__ = ({\\n\\n 92:\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/sass-loader/dist/cjs.js):\\\\nSassError: expected \\\\\\\"{\\\\\\\".\\\\n   \\u2577\\\\n36 \\u2502   color\\\\r\\\\n   \\u2502        ^\\\\n   \\u2575\\\\n  src\\\\\\\\app\\\\\\\\cart\\\\\\\\cart.component.scss 36:8  root stylesheet\\\");\\n\\n })\\n\\n \\t});\\n\\n \\t\\n \\t// startup\\n \\t// Load entry module and return exports\\n \\t// This entry module doesn't tell about it's top-level declarations so it can't be inlined\\n \\tvar __webpack_exports__ = {};\\n \\t__webpack_modules__[92]();\\n \\tresource = __webpack_exports__;\\n \\t\\n })()\\n;\"]\n});","map":{"version":3,"mappings":";;;;;;IAEEA,8BAAsD;IAEpDA,yBAA6C;IAE7CA,8BAAuB;IACjBA,YAAgB;IAAAA,iBAAK;IACzBA,4BAAiB;IAAAA,YAA2B;;IAAAA,iBAAI;IAEhDA,8BAAqB;IACXA;MAAA;MAAA;MAAA;MAAA,OAASA,0CAAiB;IAAA,EAAC;IAACA,kBAAC;IAAAA,iBAAS;IAC9CA,6BAAM;IAAAA,aAAc;IAAAA,iBAAO;IAC3BA,mCAAoC;IAA5BA;MAAA;MAAA;MAAA;MAAA,OAASA,0CAAiB;IAAA,EAAC;IAACA,kBAAC;IAAAA,iBAAS;IAIlDA,mCAAsD;IAA3BA;MAAA;MAAA;MAAA;MAAA,OAASA,yCAAgB;IAAA,EAAC;IAACA,kBAAC;IAAAA,iBAAS;;;;IAb3DA,eAAsB;IAAtBA,yDAAsB;IAGrBA,eAAgB;IAAhBA,mCAAgB;IACHA,eAA2B;IAA3BA,yDAA2B;IAIpCA,eAAc;IAAdA,iCAAc;;;;;IAZ5BA,8BAAyE;IAEvEA,qEAiBM;IAENA,6BAAkB;IAAAA,YAAkC;;IAAAA,iBAAK;;;;IAnBjBA,eAAY;IAAZA,0CAAY;IAmBlCA,eAAkC;IAAlCA,6EAAkC;;;;;IAIpDA,8BAAkB;IAAAA,6BAAa;IAAAA,iBAAK;;;ACjBtC,OAAM,MAAOC,aAAa;EAKxBC,YAAoBC,IAAiB;IAAjB,SAAI,GAAJA,IAAI;IAHxB,cAAS,GAAU,EAAE;IACrB,eAAU,GAAG,CAAC;EAE0B;EAExCC,QAAQ;IACN;IACA,IAAI,CAACD,IAAI,CAACE,UAAU,CAACC,SAAS,CAACC,KAAK,IAAG;MACrC,IAAI,CAACC,SAAS,GAAGD,KAAK,CAACE,GAAG,CAACC,IAAI,KAAK;QAClC,GAAGA,IAAI;QACPC,GAAG,EAAED,IAAI,CAACE,QAAQ,IAAI;OACvB,CAAC,CAAC;MAEH,IAAI,CAACC,cAAc,EAAE;IACvB,CAAC,CAAC;EACJ;EAEAC,WAAW,CAACJ,IAAS;IACnBA,IAAI,CAACC,GAAG,EAAE;IACV,IAAI,CAACI,UAAU,CAACL,IAAI,CAAC;EACvB;EAEAM,WAAW,CAACN,IAAS;IACnB,IAAIA,IAAI,CAACC,GAAG,GAAG,CAAC,EAAE;MAChBD,IAAI,CAACC,GAAG,EAAE;MACV,IAAI,CAACI,UAAU,CAACL,IAAI,CAAC;;EAEzB;EAEAK,UAAU,CAACL,IAAS;IAClB,IAAI,CAACP,IAAI,CAACc,cAAc,CAACP,IAAI,CAACQ,EAAE,EAAER,IAAI,CAACC,GAAG,CAAC;IAC3C,IAAI,CAACE,cAAc,EAAE;EACvB;EAEAM,UAAU,CAACT,IAAS;IAClB,IAAI,CAACP,IAAI,CAACgB,UAAU,CAACT,IAAI,CAAC;EAC5B;EAEAG,cAAc;IACZ,IAAI,CAACO,UAAU,GAAG,IAAI,CAACZ,SAAS,CAC7Ba,MAAM,CAAC,CAACC,GAAG,EAAEZ,IAAI,KAAKY,GAAG,GAAIZ,IAAI,CAACa,KAAK,GAAGb,IAAI,CAACC,GAAI,EAAE,CAAC,CAAC;EAC5D;;AA3CWV,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAAuB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDR1B5B,8DAsBM;MAENA,+GAEc;;;;MA1BeA,+CAA4B","names":["i0","CartComponent","constructor","cart","ngOnInit","cartItems$","subscribe","items","cartItems","map","item","qty","quantity","calculateTotal","increaseQty","updateItem","decreaseQty","updateQuantity","id","removeItem","totalPrice","reduce","sum","price","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["E:\\store-page\\src\\app\\cart\\cart.component.html","E:\\store-page\\src\\app\\cart\\cart.component.ts"],"sourcesContent":["<div class=\"cart-container\" *ngIf=\"cartItems.length > 0; else emptyCart\">\r\n\r\n  <div class=\"cart-card\" *ngFor=\"let item of cartItems\">\r\n    \r\n    <img [src]=\"item.thumbnail\" class=\"cart-img\">\r\n\r\n    <div class=\"cart-info\">\r\n      <h3>{{ item.title }}</h3>\r\n      <p class=\"price\">{{ item.price | currency }}</p>\r\n\r\n      <div class=\"qty-box\">\r\n        <button (click)=\"decreaseQty(item)\">-</button>\r\n        <span>{{ item.qty }}</span>\r\n        <button (click)=\"increaseQty(item)\">+</button>\r\n      </div>\r\n    </div>\r\n\r\n    <button class=\"delete-btn\" (click)=\"removeItem(item)\">X</button>\r\n\r\n  </div>\r\n\r\n  <h2 class=\"total\">Total: {{ totalPrice | currency }}</h2>\r\n</div>\r\n\r\n<ng-template #emptyCart>\r\n  <h2 class=\"empty\">Cart is empty</h2>\r\n</ng-template>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CartService } from '../service/cart.service';\r\n\r\n@Component({\r\n  selector: 'app-cart',\r\n  templateUrl: './cart.component.html',\r\n  styleUrls: ['./cart.component.scss']\r\n})\r\nexport class CartComponent implements OnInit {\r\n\r\n  cartItems: any[] = [];\r\n  totalPrice = 0;\r\n\r\n  constructor(private cart: CartService) {}\r\n\r\n  ngOnInit(): void {\r\n    // მოსმენასაც იწყებს live updates-სთვის\r\n    this.cart.cartItems$.subscribe(items => {\r\n      this.cartItems = items.map(item => ({\r\n        ...item,\r\n        qty: item.quantity || 1\r\n      }));\r\n\r\n      this.calculateTotal();\r\n    });\r\n  }\r\n\r\n  increaseQty(item: any) {\r\n    item.qty++;\r\n    this.updateItem(item);\r\n  }\r\n\r\n  decreaseQty(item: any) {\r\n    if (item.qty > 1) {\r\n      item.qty--;\r\n      this.updateItem(item);\r\n    }\r\n  }\r\n\r\n  updateItem(item: any) {\r\n    this.cart.updateQuantity(item.id, item.qty);\r\n    this.calculateTotal();\r\n  }\r\n\r\n  removeItem(item: any) {\r\n    this.cart.removeItem(item);\r\n  }\r\n\r\n  calculateTotal() {\r\n    this.totalPrice = this.cartItems\r\n      .reduce((sum, item) => sum + (item.price * item.qty), 0);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}